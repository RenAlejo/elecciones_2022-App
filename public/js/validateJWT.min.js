const url=window.location.hostname.includes("localhost")?"http://localhost:8181/api/":"https://votaciones2022.herokuapp.com/api/";let tk=localStorage.getItem("token")||"";if(tk.length<=10||""==tk)throw window.location="/views/logout.html",new Error("El token no es vÃ¡lido");localStorage.getItem("tk",tk);const validateJWT=async()=>{try{const t=await fetch(url+"auth",{headers:{Authorization:tk}}),{user:o,token:a}=await t.json();localStorage.setItem("token",a),userInfo=o,tk=a,console.log("user info: ",o)}catch(t){window.location="/",alert(t),console.log(t)}},main=async()=>{await validateJWT()};main();