const votosForm=document.querySelector("#formVotos"),sendFormButton=document.querySelector("#sendformbutton"),divErrors=document.getElementById("errors"),divTotal=document.querySelector("#total"),divTotalVotosReg=document.querySelector("#totalVotosReg"),btnMesaDiferencia=document.querySelector("#mesadiferencia"),btnJuradoDiferencia=document.querySelector("#juradodiferencia"),divDiferenciaVotosMesa=document.querySelector("#diferenciaVotosMesa");votosForm.addEventListener("submit",e=>{e.preventDefault();const r={};for(let e of votosForm.elements)e.name.length>0&&(r[e.name]=e.value);sendFormButton.innerHTML='Enviando Formulario <div class="spinner-grow spinner-grow-sm justify-content-md-right" role="status"><span class="visually-hidden"></span></div>',setTimeout(()=>{sendFormButton.innerHTML='Validando Información <div class="spinner-grow spinner-grow-sm justify-content-md-right" role="status"><span class="visually-hidden"></span></div>',fetch(url+"form",{method:"POST",body:JSON.stringify(r),headers:{Authorization:token,"Content-Type":"application/json"}}).then(e=>e.json()).then(e=>{if(e.errors){for(let r in e.errors){divErrors.innerHTML=`<div class="alert alert-danger"><i class="bi bi-exclamation-circle"></i> • ${e.errors[r].msg} </div><br>`;let o=e.errors[r].param;"codigo_mun"==o&&(o="municipiosSelect"),"codigo_dep"==o&&(o="departamentosSelect");document.querySelector(`#${o}`);document.getElementById(o).classList.add("is-invalid")}return sendFormButton.innerHTML="Enviar Formulario",console.error(e)}divErrors.innerHTML='<div class="alert alert-success"><i class="bi bi-check-circle"></i> Formulario registrado con éxito. </div>',sendFormButton.innerHTML="Enviar Formulario",total.innerHTML=0,divTotalVotosReg.innerHTML=0,divDiferenciaVotosMesa.innerHTML=0,mesadiferencia.classList.remove("btn-danger"),mesadiferencia.classList.add("btn-success"),btnJuradoDiferencia.classList.remove("btn-danger"),btnJuradoDiferencia.classList.add("btn-success");for(let e of votosForm.elements)e.name.length>0&&(e.value="",e.classList.remove("is-invalid"));setTimeout(()=>{divErrors.innerHTML=""},2e3)}).catch(e=>{console.log(e)})},1e3)});